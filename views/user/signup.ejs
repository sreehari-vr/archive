<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Join Archive - Sign Up</title>
  <link rel="shortcut icon" type="image/png" href="../../../uploads/archivelogo.png" />

  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <style>
    :root {
      --primary-color: #88c8bc;
      --secondary-color: #59988d;
      --background-color: #f9f9f9;
      --text-color: #2d3436;
    }

    body {
      font-family: "Inter", sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      align-items: center;
    }

    .signup-container {
      background-color: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      margin: 1rem;
    }

    .signup-header {
      background-color: var(--primary-color);
      padding: 2rem;
      color: white;
      text-align: center;
    }

    .signup-header h1 {
      font-weight: 700;
      margin-bottom: 0;
    }

    .signup-form {
      padding: 2rem;
    }

    .form-floating {
      margin-bottom: 1rem;
    }

    .form-control {
      border: none;
      border-bottom: 2px solid #dfe6e9;
      border-radius: 0;
      padding: 0.75rem 0;
    }

    .form-control:focus {
      box-shadow: none;
      border-color: var(--primary-color);
    }

    .form-floating label {
      padding-left: 0;
      color: #b2bec3;
    }

    .btn-signup {
      background-color: var(--primary-color);
      border: none;
      border-radius: 50px;
      padding: 0.75rem 2rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-signup:hover {
      background-color: var(--secondary-color);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
    }

    .btn-google {
      background-color: white;
      color: var(--text-color);
      border: 2px solid #dfe6e9;
      border-radius: 50px;
      padding: 0.75rem 2rem;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .btn-google:hover {
      background-color: #f1f3f5;
      border-color: var(--text-color);
    }

    .divider {
      display: flex;
      align-items: center;
      text-align: center;
      color: #b2bec3;
      margin: 1.5rem 0;
    }

    .divider::before,
    .divider::after {
      content: "";
      flex: 1;
      border-bottom: 1px solid #dfe6e9;
    }

    .divider span {
      padding: 0 1rem;
    }

    .login-link {
      text-align: center;
      margin-top: 1.5rem;
    }

    .login-link a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .login-link a:hover {
      color: var(--secondary-color);
    }

    .error-message {
      color: red;
      font-size: 0.75rem;
      display: block;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="signup-container">
          <div class="signup-header">
            <img src="../../uploads/archivelog.png" alt="Login Illustration" class="login-illustration"
              style="height: 100px;">
          </div>
          <div class="signup-form">
            <form id="signForm" method="post" action="/signup">
              <div class="form-floating">
                <input type="text" class="form-control" id="name" placeholder="Username" name="name" />
                <label for="username">Username</label>
                <div id="error1" class="error-message"></div>
              </div>
              <div class="form-floating">
                <input type="email" class="form-control" id="email" placeholder="Email address" name="email" />
                <label for="email">Email address</label>
                <div id="error2" class="error-message"></div>
              </div>
              <div class="form-floating">
                <input type="text" class="form-control" id="phone" placeholder="Phone number" name="phone" />
                <label for="phone">Phone number</label>
                <div id="error3" class="error-message"></div>
              </div>
              <div class="form-floating">
                <input type="password" class="form-control" id="password" placeholder="Password" name="password" />
                <label for="password">Password</label>
                <div id="error4" class="error-message"></div>
              </div>
              <div class="form-floating mb-4">
                <input type="password" class="form-control" id="cPassword" placeholder="Confirm Password"
                  name="cPassword" />
                <label for="cPassword">Confirm Password</label>
                <div id="error5" class="error-message"></div>
              </div>
              <div class="form-floating">
                <input type="text" class="form-control" id="referral" placeholder="referralCode" name="referral" />
                <label for="referral">Referral code (Optional)</label>
                <div id="error6" class="error-message"></div>
              </div>

              <%if(locals.message && message.length>0){%>
                <div class="alert alert-danger text-center">
                  <%=message%>
                </div>
                <%}%>

                  <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-signup">
                      Create Account
                    </button>
                  </div>
            </form>

            <div class="divider">
              <span>or</span>
            </div>

            <div class="d-grid">
              <a href="/auth/google" class="btn btn-google">
                <i class="fab fa-google me-2"></i> Sign up with Google
              </a>
            </div>

            <div class="login-link">
              Already have an account? <a href="/login">Log in</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      0
      const nameId = document.getElementById("name");
      const emailId = document.getElementById("email");
      const phoneId = document.getElementById("phone");
      const passId = document.getElementById("password");
      const cPassId = document.getElementById("cPassword");
      const error1 = document.getElementById("error1");
      const error2 = document.getElementById("error2");
      const error3 = document.getElementById("error3");
      const error4 = document.getElementById("error4");
      const error5 = document.getElementById("error5");
      const signForm = document.getElementById("signForm");

      function nameValidation() {
        const nameVal = nameId.value.trim();
        const namePattern = /^[A-Za-z\s]+$/;

        if (!nameVal) {
          error1.textContent = "Please enter your name.";
          return false;
        } else if (!namePattern.test(nameVal)) {
          error1.textContent = "Please enter a valid name.";
          return false;
        } else {
          error1.textContent = "";
          return true;
        }
      }

      function emailValidation() {
        const emailVal = emailId.value.trim();
        const emailPattern =
          /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

        if (!emailPattern.test(emailVal)) {
          error2.textContent = "Please enter a valid Email address";
          return false;
        } else {
          error2.textContent = "";
          return true;
        }
      }

      function phoneValidation() {
        const phoneVal = phoneId.value.trim();
        const phonePattern = /^[0-9]{10}$/;

        if (!phoneVal) {
          error3.textContent = "Please enter your phone number.";
          return false;
        } else if (!phonePattern.test(phoneVal)) {
          error3.textContent = "Please enter a valid phone number.";
          return false;
        } else {
          error3.textContent = "";
          return true;
        }
      }

      function passwordValidation() {
        const passVal = passId.value;
        const cPassVal = cPassId.value;
        const alpha = /[a-zA-Z]/.test(passVal);
        const num = /\d/.test(passVal);

        if (passVal.length < 8) {
          error4.textContent = "Password should contain atleast 8 characters";
          return false;
        } else if (!alpha || !num) {
          error4.textContent = "Password should contain numbers and alphabets";
          return false;
        } else if (passVal !== cPassVal) {
          error5.textContent = "Passwords do not match.";
          return false;
        } else {
          error4.textContent = "";
          error5.textContent = "";
          return true;
        }
      }

      signForm.addEventListener('submit', (e) => {
        const isNameValid = nameValidation();
        const isEmailValid = emailValidation();
        const isPhoneValid = phoneValidation();
        const isPasswordValid = passwordValidation();
        if (!isNameValid || !isEmailValid || !isPhoneValid || !isPasswordValid) {
          e.preventDefault();
        }
      });
    });


  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>

</html>